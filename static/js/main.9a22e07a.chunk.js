(this["webpackJsonpslurm-job-generator"]=this["webpackJsonpslurm-job-generator"]||[]).push([[0],{12:function(e,t,a){e.exports=a(18)},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),i=a(4),c=a.n(i),r=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",null,n.a.createElement("h1",null,"saliksik slurm job generator"),n.a.createElement("div",{className:"externalSites"},n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("a",{href:"https://asti.dost.gov.ph/coare/servicedesk/pages/UI.php"},"User Portal")),"|",n.a.createElement("li",null,n.a.createElement("a",{href:"https://www.facebook.com/coare.project"},"Facebook")),"|",n.a.createElement("li",null,n.a.createElement("a",{href:"https://slurm.schedmd.com/documentation.html"},"Slurm"))))),n.a.createElement("hr",null),n.a.createElement("p",null,"A Slurm job script generator configured for the COARE facility's compute cluster, saliksik"))},s=a(2),o=a(5),m=a(6),u=a(7),d=a(1),h=a(11),b=a(10);var p=function(e){return n.a.createElement("div",{className:"jobContainer jobForm "+e.hidden},n.a.createElement("div",null,n.a.createElement("div",{className:"configTitle"},n.a.createElement("h3",null,"SBATCH Configuration"),n.a.createElement("button",{className:"btn viewBtn",onClick:e.changeView},"Load Modules")),n.a.createElement("label",{htmlFor:"partition",className:"inputLabel"},"Partition"),n.a.createElement("div",{className:"buttonGrp"},n.a.createElement("button",{name:"debug",className:"btn",onClick:e.handlePartitionClick},"Debug"),n.a.createElement("button",{name:"batch",className:"btn",onClick:e.handlePartitionClick},"Batch"),n.a.createElement("button",{name:"serial",className:"btn",onClick:e.handlePartitionClick},"Serial"),n.a.createElement("button",{name:"gpu",className:"btn",onClick:e.handlePartitionClick},"GPU"))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"jobName",className:"inputLabel"},"Job name"),n.a.createElement("input",{type:"text",name:"jobName",onChange:e.onChange})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"email",className:"inputLabel"},"Job Alert Email"),n.a.createElement("input",{type:"text",name:"email",onChange:e.onChange})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"emailEvent",className:"inputLabel"},"Email Event"),n.a.createElement("div",{className:"buttonGrp"},n.a.createElement("button",{name:"begin",className:"btn",onClick:e.handleEmailClick},"Begin"),n.a.createElement("button",{name:"end",className:"btn",onClick:e.handleEmailClick},"End"),n.a.createElement("button",{name:"requeue",className:"btn",onClick:e.handleEmailClick},"Requeue"),n.a.createElement("button",{name:"fail",className:"btn",onClick:e.handleEmailClick},"Fail"),n.a.createElement("button",{name:"all",className:"btn",onClick:e.handleEmailClick},"All"))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"requeue"},"Requeue"),n.a.createElement("button",{name:"requeue",className:"checkbox",onClick:e.handleCheckClick},e.check)),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"nodes",className:"inputLabel"},"Number of nodes"),n.a.createElement("input",{type:"text",name:"nodes",onChange:e.onChange})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"ntasksNode",className:"inputLabel"},"Processes per node"),n.a.createElement("input",{type:"text",name:"ntasksNode",onChange:e.onChange})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"ntasks",className:"inputLabel"},"Total Processes (across all nodes)"),n.a.createElement("input",{type:"text",name:"ntasks",onChange:e.onChange})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"memory",className:"inputLabel"},"RAM per node (default: MB)"),n.a.createElement("div",{className:"memBtn"},n.a.createElement("input",{type:"text",name:"memory",onChange:e.onChange}),n.a.createElement("button",{className:"btn",onClick:e.handleGigClick},"GB"))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"output",className:"inputLabel"},"Standard Output File"),n.a.createElement("input",{type:"text",name:"output",onChange:e.onChange})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"error",className:"inputLabel"},"Standard Error File"),n.a.createElement("input",{type:"text",name:"error",onChange:e.onChange})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"nodelist",className:"inputLabel"},"Specific Node to Run"),n.a.createElement("input",{type:"text",name:"nodelist",onChange:e.onChange})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"gpu",className:"inputLabel"},"Number of GPU devices"),n.a.createElement("input",{type:"text",name:"gpu",onChange:e.onChange})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"jobArray",className:"inputLabel"},"Job Array"),n.a.createElement("input",{type:"text",name:"jobArray",onChange:e.onChange})))};var g=function(e){return n.a.createElement(n.a.Fragment,null,"#SBATCH ",e.prefix,e.value,n.a.createElement("br",null))};var E=function(e){return n.a.createElement(n.a.Fragment,null,"module load ",e.value,n.a.createElement("br",null))};var k=function(e){var t={jobName:"--job-name=",nodes:"--nodes=",ntasks:"--ntasks=",ntasksNode:"--ntasks-per-node=",partition:"--partition=",qos:"--qos=",memory:"--mem=",output:"--output=",error:"--error=",email:"--mail-user=",emailEvent:"--mail-type=",nodelist:"--nodelist=",jobArray:"--array=",gpu:"--gres=gpu:",requeue:"--requeue"},a=e.job,l=Object.keys(a).map((function(e,l){var i=a[e];return"isSbatch"===e||"modules"===e?null:"emailEvent"===e&&i.length?n.a.createElement(g,{key:l,prefix:t[e],value:i.join(",").toUpperCase()}):"requeue"===e&&!0===i?n.a.createElement(g,{key:l,prefix:t[e]}):i.length?n.a.createElement(g,{key:l,prefix:t[e],value:i}):null})),i=a.modules.map((function(e,t){return n.a.createElement(E,{key:t,value:e})}));return n.a.createElement("div",{className:"jobContainer jobScript"},n.a.createElement("div",{className:"titleBar"},n.a.createElement("p",null,"Slurm Job Template")),n.a.createElement("div",{className:"helpBar"},n.a.createElement("p",null,"Copy this template to the saliksik cluster")),n.a.createElement("pre",null,"#!/bin/bash",n.a.createElement("br",null),l,n.a.createElement("br",null),i))},C=a(8),v=a.n(C),f=a(9),N=a.n(f);function y(e){var t="btn";return e.modules.includes(e.module)&&(t+=" btnActive"),n.a.createElement("button",{name:e.module,className:t,onClick:e.addModulefiles},e.module)}function j(e){var t=v.a.cpuModules,a=N.a.gpuModules,l=t.map((function(t,a){var l=t;return n.a.createElement(y,{key:a,module:l,addModulefiles:e.addModulefiles,modules:e.modules})})),i=a.map((function(t,a){var l=t;return n.a.createElement(y,{key:a,module:l,addModulefiles:e.addModulefiles,modules:e.modules})})),c="btn",r="btn";return e.isModulesCpu?(c+=" btnActive",r="btn"):(r+=" btnActive",c="btn"),n.a.createElement("div",{className:"jobContainer jobForm "+e.hidden},n.a.createElement("div",{className:"configTitle"},n.a.createElement("h3",null,"Module Environments"),n.a.createElement("button",{className:"btn viewBtn",onClick:e.changeView},"SBATCH Config")),n.a.createElement("div",{className:"btnGrp"},n.a.createElement("button",{className:c,onClick:e.toggleCpuModules},"Show CPU Modules"),"|\xa0",n.a.createElement("button",{className:r,onClick:e.toggleGpuModules},"Show GPU Modules")),n.a.createElement("hr",null),e.isModulesCpu?l:i)}var M=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var l;return Object(m.a)(this,a),(l=t.call(this,e)).state={partition:"",qos:"",jobName:"",email:"",emailEvent:[],isSbatch:!0,modules:[],isModulesCpu:!0},l.check="\xa0",l.sbatchHide="",l.moduleHide="hidden",l.handleChange=l.handleChange.bind(Object(d.a)(l)),l.handlePartitionClick=l.handlePartitionClick.bind(Object(d.a)(l)),l.handleGigClick=l.handleGigClick.bind(Object(d.a)(l)),l.handleEmailClick=l.handleEmailClick.bind(Object(d.a)(l)),l.handleCheckClick=l.handleCheckClick.bind(Object(d.a)(l)),l.addModulefiles=l.addModulefiles.bind(Object(d.a)(l)),l.changeView=l.changeView.bind(Object(d.a)(l)),l.toggleCpuModules=l.toggleCpuModules.bind(Object(d.a)(l)),l.toggleGpuModules=l.toggleGpuModules.bind(Object(d.a)(l)),l}return Object(u.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,l=t.value;console.log(a,l),this.setState(Object(o.a)({},a,l))}},{key:"handleClickActive",value:function(e){var t,a=this.inputEl.current.children,l=Object(s.a)(a);try{for(l.s();!(t=l.n()).done;){t.value.className="btn"}}catch(n){l.e(n)}finally{l.f()}e.target.className+=" btnActive"}},{key:"handleGigClick",value:function(e){var t=this.state.memory.slice(),a="btn";if(!t)return null;t.includes("G")?t=t.slice(0,-1):(t+="G",a+=" btnActive"),e.target.className=a,this.setState({memory:t})}},{key:"handlePartitionClick",value:function(e){var t,a,l=e.target,n=l.name,i=l.parentElement.children,c=Object(s.a)(i);try{for(c.s();!(t=c.n()).done;){t.value.className="btn"}}catch(r){c.e(r)}finally{c.f()}if(this.state.partition&&this.state.partition===n)return this.setState({partition:"",qos:""});switch(e.target.className+=" btnActive",n){case"debug":a="240c-1h_debug";break;case"batch":a="240c-1h_batch";break;case"gpu":a="12c-1h_2gpu";break;case"serial":a="84c-1d_serial"}this.setState({partition:n,qos:a})}},{key:"handleEmailClick",value:function(e){var t,a=e.target,l=a.name,n=a.parentElement,i=this.state.emailEvent,c=n.children;if("all"!==l||i.includes(l))if("all"===l){t=i.slice(i.length);var r,o=Object(s.a)(c);try{for(o.s();!(r=o.n()).done;){r.value.className="btn"}}catch(d){o.e(d)}finally{o.f()}}else i.includes("all")?t=i.slice():i.includes(l)?(t=i.slice().filter((function(e){return e!==l})),e.target.className="btn"):(t=i.slice().concat(l),e.target.className="btn btnActive");else{t=i.slice(i.length).concat(l);var m,u=Object(s.a)(c);try{for(u.s();!(m=u.n()).done;){m.value.className="btn btnActive"}}catch(d){u.e(d)}finally{u.f()}}this.setState({emailEvent:t})}},{key:"handleCheckClick",value:function(e){this.state.requeue?(e.target.className="checkbox",this.setState({requeue:!1}),this.check="\xa0"):(this.setState({requeue:!0}),e.target.className="checkbox btnActive",this.check="\u2713")}},{key:"addModulefiles",value:function(e){var t=e.target.name,a=this.state.modules.slice();a.includes(t)?(a=a.filter((function(e){return e!==t})),this.setState({modules:a})):this.setState({modules:a.concat(t)})}},{key:"changeView",value:function(){var e=this.state.isSbatch;this.setState({isSbatch:!e}),e?(this.moduleHide="",this.sbatchHide="hidden"):(this.moduleHide="hidden",this.sbatchHide="")}},{key:"toggleCpuModules",value:function(){this.setState({isModulesCpu:!0})}},{key:"toggleGpuModules",value:function(){this.setState({isModulesCpu:!1})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h2",null,"Job Settings"),n.a.createElement("div",{className:"jobWrapper"},n.a.createElement(p,{onChange:this.handleChange,handlePartitionClick:this.handlePartitionClick,handleGigClick:this.handleGigClick,handleEmailClick:this.handleEmailClick,handleEmailAllClick:this.handleEmailAllClick,handleCheckClick:this.handleCheckClick,check:this.check,changeView:this.changeView,hidden:this.sbatchHide}),n.a.createElement(j,{changeView:this.changeView,addModulefiles:this.addModulefiles,hidden:this.moduleHide,modules:this.state.modules,isModulesCpu:this.state.isModulesCpu,toggleCpuModules:this.toggleCpuModules,toggleGpuModules:this.toggleGpuModules}),n.a.createElement(k,{className:"hidden",job:this.state})))}}]),a}(n.a.Component);a(17);var S=function(){return n.a.createElement("div",{className:"container"},n.a.createElement(r,null),n.a.createElement(M,null))};c.a.render(n.a.createElement(S,null),document.getElementById("root"))},8:function(e,t){t.cpuModules=["anaconda/2-5.3.1","anaconda/3-5.3.1","autodock/4.2.6_openmpi-4.0.3","bcftools/1.10.2","binutils/2.34","bwa/0.7.17","bzip2/1.0.8_gcc-8.4.0","cmake/3.17.0.rc3_gcc-8.4.0","curl/7.69.1","curl/7.69.1_gcc-8.4.0","fast-tk/0.0.13","fastp/0.20.0","fftw/3.3.8","gawk/5.0.1","gcc/8.4.0","gettext/0.20","gmp/6.2.0","gnuplot/5.2.4","gromacs/2020.1_openmpi-4.0.3","hdf5/1.12.0","hdf5/1.12.0_openmpi-4.0.2","hpl/2.3","isl/0.14","isl/0.18","jasper/2.0.16","java/1.8.0","jmodeltest/2.1.10","libjpeg/2.0.4","libpng/1.6.37","libtiff/4.1.0","lzip/1.21","mafft/7.453.0","make/4.3","matlab/R2019a","mdtraj/1.9.3","mpc/1.1.0","mpfr/4.0.2","mpich/3.3.2","namd/2.13.0","nco/4.6.1","netcdf-fortran/4.5.2","netcdf/4.7.3","netcdf/4.7.4_openmpi-4.0.2","nodejs/10.0.0","nwchem/7.0.0","nwchem/7.0.0_singularity","openmpi/4.0.2","openmpi/4.0.3_gcc-8.4.0","paml/4.9.0","perl/5.30.2","phyml/3.3.2019","picard/2.22.1","prank/17.04.27","python/3.8.2","qe/6.4.1p_openmpi-4.0.3","qe/6.5_openmpi-4.0.3","raxml/8.2.12","regcm/4.7.0","regcm/4.7.0_bats","regcm/4.7.0_clm","regcm/4.7.0_clm-4.5","ruby/2.7.0","samtools/1.10","scilab/6.1.0","singularity/rstudio-server-1.2.5033","spades/3.14.0","sqlite/3.31.1","sra_tools/2.10.5","texinfo/6.3","vcftools/0.1.6","vmd/1.9.3","wgrib/1.8.0","wgrib/2.0.7","wgrib/2.0.8","wtbg/2.5.0","xz/5.2.4_gcc-8.4.0","zlib/1.2.11_gcc-8.4.0"]},9:function(e,t){t.gpuModules=["cuda/10.1_cudnn-7.6.5","openmpi/4.0.3_cuda-10.1","pgi/cuda/10.1","cuda/8.0_cudnn-6.0","openmpi/4.0.3_pgi-19.10","pgi/cuda/9.2","gromacs/2020.1_cuda-10.1","pgi/19.10","pgi/openmpi/3.1.3","namd/2.13","pgi/cuda/10.0","qe/6.5_pgi-19.10_openmpi-3.1.3"]}},[[12,1,2]]]);
//# sourceMappingURL=main.9a22e07a.chunk.js.map